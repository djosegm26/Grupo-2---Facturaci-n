<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"> <!-- ConfiguraciÃ³n de caracteres para espaÃ±ol -->
  <title>Clientes</title>
  
  <!-- Estilos globales -->
  <link rel="stylesheet" href="/public/css/style.css">
</head>

<body>
  <header>
    <h1>GestiÃ³n de Clientes</h1> <!-- TÃ­tulo principal de la vista -->
  </header>

  <main>

    <!-- ================================
        FORMULARIO PARA REGISTRAR CLIENTES
        ================================ -->
    <h2>Registro de Clientes</h2>

    <!-- Formulario que envÃ­a los datos al backend -->
    <form id="clienteForm" action="/clientes/nuevo" method="POST">

      <!-- Campo: Nombre -->
      <input 
        type="text"
        id="nombreCliente"
        placeholder="Nombre"
        name="nombre"
        required
      >

      <!-- Campo: IdentificaciÃ³n -->
      <input 
        type="text"
        id="identificacionCliente"
        placeholder="IdentificaciÃ³n"
        name="identificacion"
        required
      >

      <!-- Campo: Email -->
      <input 
        type="email"
        id="emailCliente"
        placeholder="Email"
        name="email"
        required
      >

      <!-- Campo: TelÃ©fono -->
      <input 
        type="text"
        id="telefonoCliente"
        placeholder="TelÃ©fono"
        name="telefono"
        required
      >

      <!-- Campo: DirecciÃ³n -->
      <input 
        type="text"
        id="direccionCliente"
        placeholder="DirecciÃ³n"
        name="direccion"
        required
      >

      <!-- BotÃ³n para aÃ±adir el cliente -->
      <button type="submit">Agregar Cliente</button>
    </form>

    <!-- ================================
        TABLA DE CLIENTES REGISTRADOS
        ================================ -->
    <h2>Lista de Clientes</h2>

    <table id="tablaClientes">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Email</th>
          <th>TelÃ©fono</th>
          <th>DirecciÃ³n</th>
          <th>IdentificaciÃ³n</th>
          <th colspan="2">Acciones</th> <!-- Editar / Eliminar -->
        </tr>
      </thead>

      <tbody>
        <!-- Verifica si existen clientes -->
        <% if (clientes && clientes.length > 0) { %>

          <!-- Recorre lista de clientes -->
          <% clientes.forEach(cliente => { %>
            <tr data-id="<%= cliente.id %>">

              <!-- Datos del cliente -->
              <td><%= cliente.nombre %></td>
              <td><%= cliente.email %></td>
              <td><%= cliente.telefono %></td>
              <td><%= cliente.direccion %></td>
              <td><%= cliente.identificacion %></td>

              <!-- Acciones de ediciÃ³n y eliminaciÃ³n -->
              <td colspan="2" class="text-center">

                <!-- BotÃ³n EDITAR -->
                <a 
                  href="/clientes/editar/<%= cliente.id %>" 
                  class="btn btn-warning btn-sm me-2"
                >
                  âœï¸ Editar
                </a>

                <!-- BotÃ³n ELIMINAR con confirmaciÃ³n -->
                <form 
                  action="/clientes/eliminar/<%= cliente.id %>" 
                  method="POST" 
                  style="display:inline;"
                  onsubmit="return confirmEliminarCliente(event, '<%= cliente.nombre %>');"
                >
                  <button type="submit" class="btn btn-danger btn-sm">
                    ğŸ—‘ï¸ Eliminar
                  </button>
                </form>
              </td>

            </tr>
          <% }) %>

        <% } else { %>
          <!-- Si no hay clientes -->
          <tr>
            <td colspan="7">No hay clientes registrados.</td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </main>

  <!-- ================================
      SCRIPT: ConfirmaciÃ³n de eliminaciÃ³n
      ================================ -->
  <script>
    // FunciÃ³n que muestra un mensaje de confirmaciÃ³n
    function confirmEliminarCliente(event, nombre) {
      return confirm('Â¿EstÃ¡s seguro que deseas eliminar al cliente "' + nombre + '"?');
    }
  </script>

</body>
</html>







