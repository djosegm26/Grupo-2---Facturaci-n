<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/public/css/style.css">
    <title>Productos</title>
</head>
<body>
    <header>
      <h1>Gesti√≥n de Productos</h1>
    </header>

    <main>
      <!-- Formulario para crear producto -->
      <form id="productoForm" method="POST" action="/productos/nuevo">
        <input type="text" name="nombre" placeholder="Nombre" required>
        <input type="text" name="descripcion" placeholder="Descripci√≥n">
        <input type="number" step="0.01" name="precio" placeholder="Precio" required>
        <input type="number" name="stock" placeholder="Stock" required>
        <button type="submit">Agregar Producto</button>
      </form>

      <h2>Lista de Productos</h2>
      <table id="tablaProductos">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Descripci√≥n</th>
            <th>Precio</th>
            <th>Stock</th>
            <th colspan="2">Acciones</th>
          </tr>
        </thead>

        <tbody>
          <% if (productos && productos.length > 0) { %>
            <% productos.forEach((producto) => { %>
              <tr>
                <td><%= producto.nombre %></td>
                <td><%= producto.descripcion %></td>
                <td>$<%= producto.precio %></td>
                <td><%= producto.stock %></td>

                <!-- Botones centrados -->
                <td colspan="2" class="text-center">
                  <a href="/productos/editar/<%= producto.id %>" class="btn btn-warning btn-sm me-2">‚úèÔ∏è Editar</a>

                  <form action="/productos/eliminar/<%= producto.id %>" method="POST" style="display:inline;"
                        onsubmit="return confirmEliminarProducto(event, '<%= producto.nombre %>');">
                    <button type="submit" class="btn btn-danger btn-sm">üóëÔ∏è Eliminar</button>
                  </form>
                </td>
              </tr>
            <% }) %>
          <% } else { %>
            <tr><td colspan="6">No hay productos registrados.</td></tr>
          <% } %>
        </tbody>
      </table>
    </main>

    <script>
      // Confirmaci√≥n antes de eliminar producto
      function confirmEliminarProducto(event, nombre) {
        return confirm('¬øEst√°s seguro que deseas eliminar el producto "' + nombre + '"? Esta acci√≥n no se puede deshacer.');
      }
    </script>
</body>
</html>



