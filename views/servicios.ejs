<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">

    <!-- T√≠tulo de la p√°gina -->
    <title>Servicios</title>

    <!-- Hoja de estilos general del proyecto -->
    <link rel="stylesheet" href="/public/css/style.css">
</head>

<body>
    <header>
        <!-- Encabezado principal -->
        <h1>Gesti√≥n de Servicios</h1>
    </header>

    <main>

        <!-- Secci√≥n de formulario para registrar un nuevo servicio -->
        <h2>Registro de Servicios</h2>

        <!-- Formulario que env√≠a los datos al backend para crear un servicio -->
        <form id="servicioForm" method="POST" action="/servicios/nuevo">

            <!-- Campo: nombre del servicio -->
            <input type="text" id="nombreServicio" placeholder="Nombre del Servicio" name="nombre" required>

            <!-- Campo: descripci√≥n del servicio -->
            <input type="text" id="descripcionServicio" placeholder="Descripci√≥n" name="descripcion">

            <!-- Campo: precio del servicio -->
            <input type="number" id="precioServicio" placeholder="Precio" name="precio" step="0.01" required>

            <!-- Bot√≥n para enviar el formulario -->
            <button type="submit">Agregar Servicio</button>
        </form>


        <!-- Secci√≥n de tabla donde se listan los servicios registrados -->
        <h2>Lista de Servicios</h2>

        <table id="tablaServicios">
            <thead>
                <tr>
                    <!-- Encabezados de la tabla -->
                    <th>Nombre</th>
                    <th>Descripci√≥n</th>
                    <th>Precio</th>
                    <th colspan="2">Acciones</th>
                </tr>
            </thead>

            <tbody>
                <% if (servicios && servicios.length > 0) { %>

                    <!-- Iteraci√≥n de cada servicio recibido desde el backend -->
                    <% servicios.forEach(servicio => { %>

                        <!-- Fila del servicio, con su ID para referencia -->
                        <tr data-id="<%= servicio.id %>">

                            <!-- Datos del servicio -->
                            <td><%= servicio.nombre %></td>
                            <td><%= servicio.descripcion %></td>
                            <td><%= servicio.precio %></td>

                            <!-- Acciones de edici√≥n y eliminaci√≥n -->
                            <td colspan="2" class="text-center">

                                <!-- Bot√≥n para editar el servicio -->
                                <a href="/servicios/editar/<%= servicio.id %>" class="btn btn-warning btn-sm me-2">
                                    ‚úèÔ∏è Editar
                                </a>

                                <!-- Formulario para eliminar el servicio -->
                                <form 
                                    action="/servicios/eliminar/<%= servicio.id %>" 
                                    method="POST" 
                                    style="display:inline;"
                                    onsubmit="return confirmEliminarServicio(event, '<%= servicio.nombre %>');"
                                >
                                    <button type="submit" class="btn btn-danger btn-sm">üóëÔ∏è Eliminar</button>
                                </form>

                            </td>
                        </tr>

                    <% }) %>

                <% } else { %>

                    <!-- Caso cuando no hay servicios registrados -->
                    <tr><td colspan="5">No hay servicios registrados.</td></tr>

                <% } %>
            </tbody>
        </table>
    </main>


    <script>
        // Funci√≥n ejecutada antes de eliminar un servicio
        // Pide confirmaci√≥n al usuario usando una alerta
        function confirmEliminarServicio(event, nombre) {
            return confirm('¬øEst√°s seguro que deseas eliminar el servicio "' + nombre + '"?');
        }
    </script>

</body>
</html>



